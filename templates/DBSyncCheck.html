<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVL Automatic Generator</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 10px;
        }

        h2 {
            font-size: 1.1em;
            margin: 8px 0 5px 0;
        }

        table,
        td,
        th {
            border: 1px solid #ddd;
            font-family: Arial, Helvetica, sans-serif;
            padding: 4px 6px;
            font-size: 0.95em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 5px;
        }

        th {
            text-align: center;
            background-color: #adacac;
            color: black;
            padding: 4px 6px;
        }

        thead th {
            position: sticky;
            top: 0;
        }

        td {
            text-align: left;
            line-height: 1.3;
        }

        tr:hover {
            background-color: #ddd;
        }

        input[type="text"],
        input[type="Text"],
        input[type="password"],
        select,
        textarea {
            font-size: 0.95em;
            padding: 3px 5px;
            margin: 1px 0;
        }

        button,
        input[type="submit"] {
            font-size: 0.95em;
            padding: 4px 10px;
            margin: 2px 3px;
        }

        hr {
            border: none;
            border-top: 1px solid #aaa;
            margin: 6px 0;
        }
    </style>
</head>

<body>
    <!-- 大标题 -->
    <h2>This page is used for DB Sync Status automatically checking.</h2>
    <!-- 显示软件版本信息 -->
    <div style="position: absolute; top: 8px; right: 20px; color: #888; font-size: 0.9em;">
        <a href="/Revision_Log.md/preview" target="_blank" style="color: #888; text-decoration: underline;">Version: {{
            Version }}</a>
    </div>

    <!-- 用于Flash 消息显示 -->
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div
        style="padding: 10px; margin: 10px 0; background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; border-radius: 4px;">
        {% for message in messages %}
        <p style="margin: 5px 0;">{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <!-- AJAX 显示消息显示 -->
    <!-- <div id="msg_avlHandle" style="height:20px;color:red;font-size:0.95em;">
        {{ msg_avlHandle }}
    </div> -->
    <!-- 返回主页面按钮 -->
    <a href="/">
        <button type="button">Return to Main Page</button>
    </a>

    <hr>

    <form method="post" enctype="multipart/form-data">
        <!-- 公共部分参数设置 -->
        <table>
            <h2>Public input setting</h2>
            <!--表头-->
            <thead>

            </thead>
            <!--内容-->
            <tbody>
                <!-- DB选择 -->
                <tr>
                    <td>DB Selection
                    </td>
                    <td>
                        <select name="DB_Select">
                            <option value="2" selected="selected">Access CNILG DB</option>
                            <option value="3">Access CNILX DB</option>
                        </select>
                    </td>
                    <td>
                        Access CNILG DB: Database server in CNILG for AD.
                        <br>Access CNILX DB: Database server in CNILX for AD.
                        <!-- <br><span style="color:red;">For production release, please use "CONNECT DB"</span> -->
                    </td>
                </tr>
                <tr>
                    <td>SAP Numbers List</td>
                    <td>
                        <textarea name="SAP_Numbers_List" rows="4" cols="50"
                            style="width:200px; max-width:500px; resize:vertical; overflow-y:auto;"
                            placeholder="E.g., 2TFE001045D1801, 2TFE001045D1802">{{ SAP_Numbers_List|default('') }}</textarea>
                    </td>
                    <td>
                        (Multiple SAP Numbers separated
                        <br>by space, comma, or semicolon or one per line)
                    </td>
                </tr>
                <tr>
                    <td>reminder e-mail</td>
                    <td>
                        <input type="text" name="Reminder_Email" size="40" value="{{ Reminder_Email|default('') }}">
                    </td>
                    <td>
                        Please input your e-mail address to receive the reminder when the process is done.
                    </td>
                </tr>
                <tr>
                    <td>Check interval time (minutes)</td>
                    <!-- 以下时间的选择使用下拉框方式选择, 下拉内容由后端提供 -->
                    <td>
                        <select name="Check_Interval_Time">
                            {% for time_option in Check_Interval_Time_List %}
                            {% if Check_Interval_Time_List.index(time_option) == 3 %}
                            <option value="{{time_option}}" selected="selected">{{time_option}}</option>
                            {% else %}
                            <option value="{{time_option}}">{{time_option}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </td>
                    <td>
                        Please select interval time in minutes for automatic DB sync status checking.
                    </td>
                </tr>
                <tr>
                    <td>Maximum check times</td>
                    <!-- 以下次数的选择使用下拉框方式选择, 下拉内容由后端提供 -->
                    <td>
                        <select name="MAX_TRY">
                            {% for times_option in MAX_TRY_List %}
                            {% if MAX_TRY_List.index(times_option) == 3 %}
                            <option value="{{times_option}}" selected="selected">{{times_option}}</option>
                            {% else %}
                            <option value="{{times_option}}">{{times_option}}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </td>
                    <td>
                        Please select maximum check times for automatic DB sync status checking.
                    </td>
                </tr>
                <!-- 检查范围选择 -->
                <tr>
                    <td>Check Scope Selection
                    </td>
                    <td>
                        <input type="radio" id="All_Columns" name="Chk_Scope" value="All_Columns">
                        <label for="All_Columns">All_Columns</label>
                        <br>
                        <input type="radio" id="eCAD_Related_Columns" name="Chk_Scope" value="eCAD_Related_Columns"
                            checked>
                        <label for="eCAD_Related_Columns">eCAD_Related_Columns</label>
                    </td>
                    <td>
                        All_Columns: Check all columns for DB sync status.
                        <br>eCAD_Related_Columns: Check only eCAD related columns for DB sync status.
                        <br>include:
                        <br> partnumber,value,sap_number,sap_description,status,
                        <br> manufact 1,manufact partnum 1,datasheet 1,manufact 2,manufact partnum 2,datasheet 2,
                        <br> manufact 3,manufact partnum 3,datasheet 3,manufact 4,manufact partnum 4,datasheet 4,
                        <br> manufact 5,manufact partnum 5,datasheet 5,manufact 6,manufact partnum 6,datasheet 6,
                        <br> manufact 7,manufact partnum 7,datasheet 7,
                        <br> scm_symbol,pcb_footprint,alt_symbols,mounttechn,ad_symbol,ad_footprint,ad_alt_footprint,
                        <br> detaildrawing,status,techdescription
                        <br> exclude:editor,us_technology

                    </td>
                    <!-- 按键 -->
                <tr>
                    <td></td>
                    <td>
                        <input type="submit" name="btn" value="Start_DB_Sync_Check" onclick="handleBtn(event);" {% if
                            not btn_enabled %}disabled{% endif %}>
                    </td>
                    <td>
                        Click "Start_DB_Sync_Check" to begin the database synchronization check.
                        <br>tbd...
                    </td>
                </tr>

            </tbody>
        </table>

    </form>
</body>

</html>